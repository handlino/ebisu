<html>
    <head>
        <script src="lib/jsan/Test/Builder.js"></script>
        <script src="lib/jsan/Test/More.js"></script>

        <script src="../lib/Ebisu.js"></script>

        <script type="text/javascript">

var hello_function = function(name) {
    if (name != null) {
        this.innerHTML = "Hello, " + name;
    }
    else {
        this.innerHTML = "Hello, world"
    }
};

Ebisu("foobar").to("e1").attach(hello_function);
Ebisu("foobar").to("e2").attach(hello_function);
Ebisu("baz").to("e1").attach(hello_function);

        </script>

    </head>
    <body>
      <div id="e1"></div>
      <div id="e2"></div>

      <pre id="test">
        <script type="text/javascript">

plan({tests: 4});

var e1 = document.getElementById("e1");
var e2 = document.getElementById("e2");

Ebisu("foobar").trigger();
is(e1.innerHTML, "Hello, world");
is(e2.innerHTML, "Hello, world");

Ebisu("foobar").trigger("Nihao");
ok(e1.innerHTML, "Hello, Nihao");
ok(e2.innerHTML, "Hello, Nihao");

        </script>
      </pre>
    </body>
</html>

