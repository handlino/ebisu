<html>
    <head>
        <script src="lib/jsan/Test/Builder.js"></script>
        <script src="lib/jsan/Test/Simple.js"></script>

        <script src="../lib/jquery-1.2.js"></script>
        <script src="../lib/Ebisu.js"></script>

        <script type="text/javascript">

function salut(name) {
    if (name != null) {
        $(this).html("Hello, " + name );
    }
    else {
        $(this).html("Hello, world");
    }
};

Ebisu("foobar").to("#e1").attach(salut);
Ebisu("foobar").to("#e2").attach(salut);
Ebisu("baz").to("#e1").attach(salut);

        </script>

    </head>
    <body>
      <div id="e1"></div>
      <div id="e2"></div>

      <pre id="test">
        <script type="text/javascript">

plan({tests: 6});

Ebisu("foobar").trigger();
ok("Hello, world" == $("#e1").html());
ok("Hello, world" == $("#e2").html());

Ebisu("foobar").trigger("Nihao");
ok("Hello, Nihao" == $("#e1").html());
ok("Hello, Nihao" == $("#e2").html());

Ebisu("baz").trigger("Baz");
ok("Hello, Baz"   == $("#e1").html());
ok("Hello, Nihao" == $("#e2").html());

        </script>
      </pre>
    </body>
</html>

